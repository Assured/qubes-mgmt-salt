# ==============================================================================
#                         FILE DIRECTORY SETTINGS 
# ==============================================================================
# The Salt Minion can redirect all file server operations to a local directory,
# this allows for the same state tree that is on the master to be used if
# copied completely onto the minion. This is a literal copy of the settings on
# the master but used to reference a local directory on the minion.


# ------------------------------------------------------------------------------
# Set the file client. The client defaults to looking on the master server for
# files, but can be directed to look at the local file directory setting
# defined below by setting it to local.
# ------------------------------------------------------------------------------
file_client: local

# ------------------------------------------------------------------------------
# The file directory works on environments passed to the minion, each environment
# can have multiple root directories, the subdirectories in the multiple file
# roots cannot match, otherwise the downloaded files will not be able to be
# reliably ensured. A base environment is required to house the top file.
# ------------------------------------------------------------------------------

# Currently filtering by grain so combined all the file_roots into base
#
# This may change when a runner is implemented
file_roots:
  base:
    - /srv/salt
    - /srv/salt/common
    - /srv/salt/dom0/services
    - /srv/salt/dom0/states
    - /srv/salt/vm/services
    - /srv/salt/vm/states

#file_roots:
#  base:
#    - /srv/salt
#    - /srv/salt/common
#  dom0:
#    - /srv/salt/dom0/services
#    - /srv/salt/dom0/states
#    - /srv/salt
#    - /srv/salt/common
#  vm:
#    - /srv/salt/vm/services
#    - /srv/salt/vm/states
#    - /srv/salt
#    - /srv/salt/common
#  dev:
#    - /srv/salt/dev/services
#    - /srv/salt/dev/states
#    - /srv/salt/dev/_formulas/linux-dev-formula
#    - /srv/salt/dev/_formulas/sphinx-doc-formula
#    - /srv/salt/dev/_formulas/virtualenv-formula
#    - /srv/salt
#    - /srv/salt/common

# ------------------------------------------------------------------------------
# By default, the Salt fileserver recurses fully into all defined environments
# to attempt to find files. To limit this behavior so that the fileserver only
# traverses directories with SLS files and special Salt directories like _modules,
# enable the option below. This might be useful for installations where a file root
# has a very large number of files and performance is negatively impacted. Default
# is False.
# ------------------------------------------------------------------------------
fileserver_limit_traversal: False

# ------------------------------------------------------------------------------
# The hash_type is the hash to use when discovering the hash of a file in
# the local fileserver. The default is md5, but sha1, sha224, sha256, sha384
# and sha512 are also supported.
#
# Warning: Prior to changing this value, the minion should be stopped and all
# Salt caches should be cleared.
# ------------------------------------------------------------------------------
hash_type: md5

# ------------------------------------------------------------------------------
# The Salt pillar is searched for locally if file_client is set to local. If
# this is the case, and pillar data is defined, then the pillar_roots need to
# also be configured on the minion:
# ------------------------------------------------------------------------------
pillar_roots:
  base:
    - /srv/pillar

# vim: set syntax=yaml ts=2 sw=2 sts=2 et :
